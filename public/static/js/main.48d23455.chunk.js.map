{"version":3,"sources":["images/header-logo.svg","images/profile-avatar.jpg","images/photo-grid-peterhof-4.jpg","images/photo-grid-peterhof-3.jpg","images/photo-grid-peterhof-1.jpg","images/photo-grid-oranienbaum-1.jpg","images/photo-grid-aleksandria.jpg","images/photo-grid-peterhof.jpg","contexts/CurrentUserContext.js","components/Header.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","utils/constants.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/ConfirmPopup.js","utils/api.js","utils/cards-init.js","components/App.js","index.js"],"names":["module","exports","CurrentUserContext","React","createContext","Header","className","src","headerLogo","alt","Card","card","onClick","onLike","onDelete","currentUser","useContext","isOwned","owner","_id","link","title","likes","length","disabled","hidden","Loader","Main","props","onEditAvatar","avatar","name","onEditProfile","about","onAddPlace","isLoading","cards","map","key","id","onCardClick","onCardLike","onCardDelete","Footer","PopupWithForm","openClass","isOpen","handleCloseClick","onClose","handleEscPress","useCallback","evt","useEffect","document","addEventListener","removeEventListener","target","currentTarget","type","size","onSubmit","children","value","submitDisabled","submitName","popupInputClass","EditProfilePopup","useState","isValid","info","inputs","setInputs","input","error","errorClasses","setErrorClasses","errorMessages","setErrorMessages","handleChange","e","validity","valid","handleInput","validationMessage","preventDefault","onUpdateUser","maxLength","minLength","placeholder","required","onChange","onInput","EditAvatarPopup","inputRef","useRef","errorMessage","setErrorMessage","isSubmitDisabled","setIsSubmitDisabled","current","onUpdateAvatar","ref","pattern","AddPlacePopup","ImagePopup","popupOpenClass","setPopupOpenClass","ConfirmPopup","onConfirm","api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","method","then","_handleResponse","item","body","JSON","stringify","data","cardId","authorization","initialCards","peterhofImage4","peterhofImage3","peterhofImage1","oranienbaumImage","alexandriaImage","peterhofImage","App","profileAvatar","setCurrentUser","setCards","selectedCard","setSelectedCard","deletedCard","setDeletedCard","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","profileSubmitName","setProfileSubmitName","avatarSubmitName","setAvatarSubmitName","addPlaceSubmitName","setAddPlaceSubmitName","deleteCardSubmitName","setDeleteCardSubmitName","setIsLoading","all","getUserInfo","getInitialCards","userData","cardsData","catch","console","log","finally","Provider","isLiked","some","likeAuthor","likeAction","unlikeCard","likeCard","changedCard","newCards","currentCard","err","patchUserProfile","newAvatarLink","patchNewAvatar","newPlace","postNewCard","newCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"yGAAAA,EAAOC,QAAU,IAA0B,yC,kBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,mD,gBCA3CD,EAAOC,QAAU,IAA0B,mD,gBCA3CD,EAAOC,QAAU,IAA0B,mD,gBCA3CD,EAAOC,QAAU,IAA0B,sD,gBCA3CD,EAAOC,QAAU,IAA0B,oD,gBCA3CD,EAAOC,QAAU,IAA0B,iD,sJCE9BC,EAAqBC,IAAMC,gB,gBCQzBC,EAPA,kBACb,4BAAQC,UAAU,UAChB,yBAAKA,UAAU,eAAeC,IAAKC,IACjCC,IAAI,yGCiDKC,MApDf,YAAoD,IAApCC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,SAC/BC,EAAcC,qBAAWd,GACzBe,EAAUN,EAAKO,QAAUH,EAAYI,IAc3C,OACE,wBAAIb,UAAU,QACZ,yBACEA,UAAU,cACVC,IAAKI,EAAKS,KACVX,IAAKE,EAAKU,MACVT,QAlBc,WAClBA,EAAQD,MAmBN,yBAAKL,UAAU,qBACb,wBAAIA,UAAU,eAAeK,EAAKU,OAClC,yBAAKf,UAAU,oBACb,4BACEA,UAAS,iEAELK,EAAKW,MAAMC,OAAS,EAAK,oBAAsB,IAEnDX,QAxBS,WACjBC,EAAOF,IAwBCU,MAAM,qDAER,0BAAMf,UAAU,kBACbK,EAAKW,MAAMC,UAKlB,4BACEjB,UAAU,wCACVkB,UAAWP,EAASQ,QAASR,EAC7BL,QAhCe,WACnBE,EAASH,IAgCLU,MAAM,iDCxCCK,EANA,WACb,OACE,yBAAKpB,UAAU,YCuDJqB,MAtDf,SAAcC,GACZ,IAAMb,EAAcC,qBAAWd,GAE/B,OACE,0BAAMI,UAAU,WACd,6BAASA,UAAU,WAEjB,yBAAKA,UAAU,kBAAkBM,QAASgB,EAAMC,cAC9C,yBACEtB,IAAKQ,EAAYe,OACjBxB,UAAU,iBACVG,IAAI,kFACJY,MAAM,sIAIV,yBAAKf,UAAU,wBACb,wBAAIA,UAAU,iBACXS,EAAYgB,MAEf,4BACEzB,UAAU,+CACVe,MAAM,4HACNT,QAASgB,EAAMI,gBAEjB,uBAAG1B,UAAU,iBAAiBS,EAAYkB,QAG5C,4BACE3B,UAAU,8CACVM,QAASgB,EAAMM,WACfb,MAAM,mHAIV,6BAASf,UAAU,cACjBsB,EAAMO,UACJ,kBAAC,EAAD,MACA,wBAAI7B,UAAU,oBACXsB,EAAMQ,MAAMC,KAAI,SAAC1B,GAAD,OACf,kBAAC,EAAD,CAAM2B,IAAK3B,EAAK4B,GACd5B,KAAMA,EACNC,QAASgB,EAAMY,YACf3B,OAAQe,EAAMa,WACd3B,SAAUc,EAAMc,sBCzCjBC,EANA,kBACb,4BAAQrC,UAAU,UAChB,uBAAGA,UAAU,qBAAb,4B,OC0DWsC,MA5Df,SAAuBhB,GACrB,IAAMiB,EAAYjB,EAAMkB,QAAU,eAE5BC,EAAmBnB,EAAMoB,QAEzBC,EAAiBC,uBAAY,SAACC,GAClB,WAAZA,EAAIb,KAAkBS,MACzB,CAACA,IAcJ,OAZAK,qBAAU,WACJxB,EAAMkB,OACRO,SAASC,iBAAiB,QAASL,GAEnCI,SAASE,oBAAoB,QAASN,KAEvC,CAACrB,EAAMkB,OAAQG,IAOhB,yBACE3C,UAAS,8BAAyBsB,EAAMG,KAA/B,YAAuCc,GAChDjC,QAPuB,SAACuC,GACtBA,EAAIK,SAAWL,EAAIM,eAAeV,MAQtC,yBAAKzC,UAAU,oBAEb,4BACEoD,KAAK,SACLpD,UAAU,4CACVe,MAAM,iMACNT,QAASmC,IAGX,0BACEhB,KAAMH,EAAMG,KACZzB,UAAS,uCAAkCsB,EAAM+B,MACjDC,SAAUhC,EAAMgC,UAEd,wBAAItD,UAAU,kBACXsB,EAAMP,OAGRO,EAAMiC,SAEP,4BACEH,KAAK,SAASI,MAAM,6CACpBtC,SAAUI,EAAMmC,eAChBzD,UAAU,uCAEPsB,EAAMoC,gBCnDRC,EACC,yBADDA,EAEJ,uBCyGMC,MAxGf,SAA0BtC,GACxB,IAAMb,EAAcC,qBAAWd,GADA,EAGHiE,mBAAS,CACnCpC,KAAM,CAAE+B,MAAO/C,EAAYgB,KAAMqC,SAAS,GAC1CC,KAAM,CAAEP,MAAO/C,EAAYkB,MAAOmC,SAAS,KALd,mBAGxBE,EAHwB,KAGhBC,EAHgB,OAQSJ,mBAAS,CAC/CpC,KAAM,CAAEyC,MAAO,GAAIC,MAAO,IAC1BJ,KAAM,CAAGG,MAAO,GAAIC,MAAO,MAVE,mBAQxBC,EARwB,KAQVC,EARU,OAaWR,mBAAS,CAACpC,KAAM,GAAIsC,KAAM,KAbrC,mBAaxBO,EAbwB,KAaTC,EAbS,KAe/BzB,qBAAU,WACJxB,EAAMkB,OACRyB,EAAU,CACRxC,KAAM,CAAE+B,MAAO/C,EAAYgB,KAAMqC,SAAS,GAC1CC,KAAM,CAAEP,MAAO/C,EAAYkB,MAAOmC,SAAS,KAG7CG,EAAU,CACRxC,KAAM,CAAE+B,MAAO,GAAIM,SAAS,GAC5BC,KAAM,CAAEP,MAAO,GAAIM,SAAS,KAGhCO,EAAgB,CACd5C,KAAM,CAAEyC,MAAO,GAAIC,MAAO,IAC1BJ,KAAM,CAAEG,MAAO,GAAIC,MAAO,QAE3B,CAAC1D,EAAaa,EAAMkB,SAEvB,IAAMgC,EAAe,SAACC,GAAO,IAAD,EACMA,EAAEvB,OAA3BzB,EADmB,EACnBA,KAAM+B,EADa,EACbA,MAAOkB,EADM,EACNA,SACpBT,EAAU,2BAAID,GAAL,kBAAcvC,EAAO,CAAE+B,MAAOA,EAAOM,QAASY,EAASC,WAG5DC,EAAc,SAACH,GAAO,IAAD,EAC0BA,EAAEvB,OAA9CzB,EADkB,EAClBA,KAAM+B,EADY,EACZA,MAAOkB,EADK,EACLA,SAAUG,EADL,EACKA,kBAC9BZ,EAAU,2BAAID,GAAL,kBAAcvC,EAAO,CAAE+B,MAAOA,EAAOM,QAASY,EAASC,UAChEJ,EAAiB,2BAAID,GAAL,kBAAqB7C,EAAOoD,KAC5CR,EAAgB,2BAAID,GAAL,kBACZ3C,EAAO,CACNyC,MAAQQ,EAASC,MAAqC,GAA7BhB,EACzBQ,MAAQO,EAASC,MAAgC,GAAxBhB,OAU/B,OACE,kBAAC,EAAD,CACElC,KAAK,UAAU4B,KAAK,IACpBtC,MAAM,4HACN2C,WAAYpC,EAAMoC,WAClBD,gBAAiBO,EAAOvC,KAAKqC,UAAYE,EAAOD,KAAKD,QACrDtB,OAAQlB,EAAMkB,OACdE,QAASpB,EAAMoB,QACfY,SAbiB,SAACmB,GACpBA,EAAEK,iBACFxD,EAAMyD,aAAa,CAAEtD,KAAMuC,EAAOvC,KAAK+B,MAAOO,KAAMC,EAAOD,KAAKP,UAa9D,2BAAOxD,UAAU,gBACf,2BAAOoD,KAAK,OACVnB,GAAG,OAAOR,KAAK,OACfzB,UAAS,4CAAuCoE,EAAa3C,KAAKyC,OAClEc,UAAU,KAAKC,UAAU,IACzBC,YAAY,qBAAMC,UAAQ,EAC1B3B,MAAOQ,EAAOvC,KAAK+B,MACnB4B,SAAUZ,EACVa,QAAST,IAEX,0BACE5E,UAAS,uBAAkBoE,EAAa3C,KAAK0C,OAC7ClC,GAAG,cAEFqC,EAAc7C,OAInB,2BAAOzB,UAAU,gBACf,2BAAOoD,KAAK,OACVnB,GAAG,OAAOR,KAAK,OACfzB,UAAS,4CAAuCoE,EAAaL,KAAKG,OAClEc,UAAU,MAAMC,UAAU,IAC1BC,YAAY,kCAASC,UAAQ,EAC7B3B,MAAOQ,EAAOD,KAAKP,MACnB4B,SAAUZ,EACVa,QAAST,IAEX,0BACE5E,UAAS,uBAAkBoE,EAAaL,KAAKI,OAC7ClC,GAAG,cAEFqC,EAAcP,SC/BVuB,MAhEf,SAAyBhE,GACvB,IAAMb,EAAcC,qBAAWd,GACzB2F,EAAWC,mBAFa,EAGU3B,mBAAS,IAHnB,mBAGvB4B,EAHuB,KAGTC,EAHS,OAIU7B,mBAAS,CAACK,MAAO,GAAIC,MAAO,KAJtC,mBAIvBC,EAJuB,KAITC,EAJS,OAKkBR,oBAAS,GAL3B,mBAKvB8B,EALuB,KAKLC,EALK,KAkC9B,OA3BA9C,qBAAU,WACJxB,EAAMkB,QACR+C,EAASM,QAAQrC,MAAQ/C,EAAYe,OACrCoE,GAAoB,KAEpBL,EAASM,QAAQrC,MAAQ,GACzBoC,GAAoB,IAEtBF,EAAgB,IAChBrB,EAAgB,CAACH,MAAO,GAAIC,MAAO,OAClC,CAAC1D,EAAaa,EAAMkB,SAkBrB,kBAAC,EAAD,CACEf,KAAK,SAAS4B,KAAK,IACnBtC,MAAM,wFACN2C,WAAYpC,EAAMoC,WAClBD,eAAgBkC,EAChBnD,OAAQlB,EAAMkB,OACdE,QAASpB,EAAMoB,QACfY,SAvBiB,SAACmB,GACpBA,EAAEK,iBACFxD,EAAMwE,eAAeP,EAASM,QAAQrC,SAuBpC,2BAAOxD,UAAU,gBACf,2BAAOoD,KAAK,MAAM2C,IAAKR,EACrBtD,GAAG,SAASR,KAAK,SACjBuE,QAAQ,cACRhG,UAAS,4CAAuCoE,EAAaF,OAC7DgB,YAAY,qGACZC,UAAQ,EACRE,QA3BY,SAACZ,GAAO,IAAD,EACaA,EAAEvB,OAAjCwB,EADkB,EAClBA,SAAUG,EADQ,EACRA,kBACjBa,EAAgBb,GAChBR,EAAgB,CACdH,MAAQQ,EAASC,MAAqC,GAA7BhB,EACzBQ,MAAQO,EAASC,MAAgC,GAAxBhB,IAE3BiC,GAAqBlB,EAASC,UAsB1B,0BACE3E,UAAS,uBAAkBoE,EAAaD,OACxClC,GAAG,gBAEFwD,MCuCIQ,MAjGf,SAAuB3E,GAAQ,IAAD,EACAuC,mBAAS,CACnC9C,MAAO,CAAEyC,MAAO,GAAIM,SAAS,GAC7BhD,KAAM,CAAE0C,MAAO,GAAIM,SAAS,KAHF,mBACrBE,EADqB,KACbC,EADa,OAMYJ,mBAAS,CAC/C9C,MAAO,CAAEmD,MAAO,GAAIC,MAAO,IAC3BrD,KAAM,CAAGoD,MAAO,GAAIC,MAAO,MARD,mBAMrBC,EANqB,KAMPC,EANO,OAWcR,mBAAS,CAAC9C,MAAO,GAAID,KAAM,KAXzC,mBAWrBwD,EAXqB,KAWNC,EAXM,KAa5BzB,qBAAU,WACRmB,EAAU,CACRlD,MAAO,CAAEyC,MAAO,GAAIM,SAAS,GAC7BhD,KAAM,CAAE0C,MAAO,GAAIM,SAAS,KAE9BO,EAAgB,CACdtD,MAAO,CAAEmD,MAAO,GAAIC,MAAO,IAC3BrD,KAAM,CAAEoD,MAAO,GAAIC,MAAO,QAE3B,CAAC7C,EAAMkB,SAEV,IAKMgC,EAAe,SAACC,GAAO,IAAD,EACMA,EAAEvB,OAA3BzB,EADmB,EACnBA,KAAM+B,EADa,EACbA,MAAOkB,EADM,EACNA,SACpBT,EAAU,2BAAID,GAAL,kBAAcvC,EAAO,CAAE+B,MAAOA,EAAOM,QAASY,EAASC,WAG5DC,EAAc,SAACH,GAAO,IAAD,EAC0BA,EAAEvB,OAA9CzB,EADkB,EAClBA,KAAM+B,EADY,EACZA,MAAOkB,EADK,EACLA,SAAUG,EADL,EACKA,kBAC9BZ,EAAU,2BAAID,GAAL,kBAAcvC,EAAO,CAAE+B,MAAOA,EAAOM,QAASY,EAASC,UAChEJ,EAAiB,2BAAID,GAAL,kBAAqB7C,EAAOoD,KAC5CR,EAAgB,2BAAID,GAAL,kBACZ3C,EAAO,CACNyC,MAAQQ,EAASC,MAAqC,GAA7BhB,EACzBQ,MAAQO,EAASC,MAAgC,GAAxBhB,OAK/B,OACE,kBAAC,EAAD,CACElC,KAAK,OAAO4B,KAAK,IACjBtC,MAAM,gEACN2C,WAAYpC,EAAMoC,WAClBD,gBAAiBO,EAAOjD,MAAM+C,UAAYE,EAAOlD,KAAKgD,QACtDtB,OAAQlB,EAAMkB,OACdE,QAASpB,EAAMoB,QACfY,SA9BiB,SAACmB,GACpBA,EAAEK,iBACFxD,EAAMM,WAAW,CAACb,MAAOiD,EAAOjD,MAAMyC,MAAO1C,KAAMkD,EAAOlD,KAAK0C,UA8B7D,2BAAOxD,UAAU,gBACf,2BAAOoD,KAAK,OACVnB,GAAG,QAAQR,KAAK,QAChBuD,UAAU,KAAKC,UAAU,IACzBjF,UAAS,4CAAuCoE,EAAarD,MAAMmD,OACnEgB,YAAY,mDACZC,UAAQ,EACR3B,MAAOQ,EAAOjD,MAAMyC,MACpB4B,SAAUZ,EACVa,QAAST,IAEX,0BACE5E,UAAS,uBAAkBoE,EAAarD,MAAMoD,OAC9ClC,GAAG,eAEFqC,EAAcvD,QAInB,2BAAOf,UAAU,gBACf,2BAAOoD,KAAK,MACVnB,GAAG,OAAOR,KAAK,OACfuE,QAAQ,cACRhG,UAAS,4CAAuCoE,EAAatD,KAAKoD,OAClEgB,YAAY,qGACZC,UAAQ,EACR3B,MAAOQ,EAAOlD,KAAK0C,MACnB4B,SAAUZ,EACVa,QAAST,IAEX,0BACE5E,UAAS,uBAAkBoE,EAAatD,KAAKqD,OAC7ClC,GAAG,cAEFqC,EAAcxD,SCxBVoF,MApEf,YAAwC,IAAlB7F,EAAiB,EAAjBA,KAAMqC,EAAW,EAAXA,QAAW,EACOmB,mBAAS,IADhB,mBAC9BsC,EAD8B,KACdC,EADc,KAG/B3D,EAAmB,WACvB2D,EAAkB,IAClB1D,KA4BF,OApBAI,qBAAU,WAER,IAAMH,EAAiB,SAACE,GACN,WAAZA,EAAIb,KAAkBS,KAS5B,OALAM,SAASC,iBAAiB,QAASL,GAEnCyD,EAAkB,gBAGV,WAENrD,SAASE,oBAAoB,QAASN,MAIvC,IAGD,yBACE3C,UAAS,oCAA+BmG,GACxC7F,QA5BuB,SAACuC,GACtBA,EAAIK,SAAWL,EAAIM,eAAeV,MA6BpC,yBACEzC,UAAU,oBAEV,4BACEoD,KAAK,SACLpD,UAAU,4CACVe,MAAM,6HACNT,QAASmC,IAGX,4BACEzC,UAAU,iBAEV,yBACEA,UAAU,eACVC,IAAKI,EAAKS,KACVX,IAAKE,EAAKU,QAEZ,gCACEf,UAAU,wBAETK,EAAKU,WCtCHsF,MApBf,SAAsB/E,GAOpB,OACE,kBAAC,EAAD,CACEG,KAAK,UAAU4B,KAAK,IACpBtC,MAAM,2DACN2C,WAAYpC,EAAMoC,WAClBD,gBAAgB,EAChBjB,OAAQlB,EAAMjB,KACdqC,QAASpB,EAAMoB,QACfY,SAbiB,SAACmB,GACpBA,EAAEK,iBACFxD,EAAMgF,UAAUhF,EAAMjB,U,eCoFXkG,EARH,I,WA/EV,cAAmC,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCC,KAAKC,SAAWH,EAChBE,KAAKE,SAAWH,E,4DAGFI,GACd,OAAIA,EAAIC,GAAWD,EAAIE,OAChBC,QAAQC,OAAOJ,EAAIK,U,oCAGb,IAAD,OACZ,OAAOC,MAAM,GAAD,OAAIT,KAAKC,SAAT,aAA8B,CACxCS,OAAQ,MACRX,QAASC,KAAKE,WAEfS,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,wCAGjB,IAAD,OAChB,OAAOM,MAAM,GAAD,OAAIT,KAAKC,SAAT,UAA2B,CACrCS,OAAQ,MACRX,QAASC,KAAKE,WAEfS,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,kCAGxBU,GAAO,IAAD,OAChB,OAAOJ,MAAM,GAAD,OAAIT,KAAKC,SAAT,UAA2B,CACrCS,OAAQ,OACRX,QAASC,KAAKE,SACdY,KAAMC,KAAKC,UAAUH,KAEtBF,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,qCAGrB/F,GAAO,IAAD,OACnB,OAAOqG,MAAM,GAAD,OAAIT,KAAKC,SAAT,oBAAqC,CAC/CS,OAAQ,QACRX,QAASC,KAAKE,SACdY,KAAMC,KAAKC,UAAU5G,KAEtBuG,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,uCAGnBc,GAAO,IAAD,OACrB,OAAOR,MAAM,GAAD,OAAIT,KAAKC,SAAT,aAA8B,CACxCS,OAAQ,QACRX,QAASC,KAAKE,SACdY,KAAMC,KAAKC,UAAU,CAACjG,KAAMkG,EAAKlG,KAAME,MAAOgG,EAAK5D,SAEpDsD,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,+BAG3Be,GAAS,IAAD,OACf,OAAOT,MAAM,GAAD,OAAIT,KAAKC,SAAT,wBAAiCiB,GAAU,CACrDR,OAAQ,MACRX,QAASC,KAAKE,WAEfS,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,iCAGzBe,GAAS,IAAD,OACjB,OAAOT,MAAM,GAAD,OAAIT,KAAKC,SAAT,wBAAiCiB,GAAU,CACrDR,OAAQ,SACRX,QAASC,KAAKE,WAEfS,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,Q,iCAGzBe,GAAS,IAAD,OACjB,OAAOT,MAAM,GAAD,OAAIT,KAAKC,SAAT,kBAA2BiB,GAAU,CAC/CR,OAAQ,SACRX,QAASC,KAAKE,WAEfS,MAAK,SAAAR,GAAG,OAAI,EAAKS,gBAAgBT,U,KAK1B,CAAQ,CAClBL,QAAS,8CACTC,QAAS,CACPoB,cAAe,uCACf,eAAgB,sB,uHC/EPC,EAAe,CAC1B,CAAE/G,MAAO,mDAAYD,KAAMiH,IAAgB/G,MAAO,GAAIJ,MAAO,EAAGqB,GAAI,GACpE,CAAElB,MAAO,mDAAYD,KAAMkH,IAAgBhH,MAAO,GAAIJ,MAAO,EAAGqB,GAAI,GACpE,CAAElB,MAAO,mDAAYD,KAAMmH,IAAgBjH,MAAO,GAAIJ,MAAO,EAAGqB,GAAI,GACpE,CAAElB,MAAO,qEAAeD,KAAMoH,IAAkBlH,MAAO,GAAIJ,MAAO,EAAGqB,GAAI,GACzE,CAAElB,MAAO,8FAAoBD,KAAMqH,IAAiBnH,MAAO,GAAIJ,MAAO,EAAGqB,GAAI,GAC7E,CAAElB,MAAO,mDAAYD,KAAMsH,IAAepH,MAAO,GAAIJ,MAAO,EAAGqB,GAAI,ICgOtDoG,MAhOf,WAAgB,IAAD,EACyBxE,mBAAS,CAC7ChD,IAAK,EACLY,KAAM,yDACNE,MAAO,kGACPH,OAAQ8G,MALG,mBACN7H,EADM,KACO8H,EADP,OAQa1E,mBAASiE,GARtB,mBAQNhG,EARM,KAQC0G,EARD,OAS2B3E,mBAAS,MATpC,mBASN4E,EATM,KASQC,EATR,OAUyB7E,mBAAS,MAVlC,mBAUN8E,EAVM,KAUOC,EAVP,OAY6C/E,oBAAS,GAZtD,mBAYNgF,EAZM,KAYkBC,EAZlB,OAauCjF,oBAAS,GAbhD,mBAaNkF,EAbM,KAaeC,EAbf,OAc2CnF,oBAAS,GAdpD,mBAcNoF,EAdM,KAciBC,EAdjB,OAgBqCrF,mBAAS,0DAhB9C,mBAgBNsF,EAhBM,KAgBaC,EAhBb,OAiBmCvF,mBAAS,0DAjB5C,mBAiBNwF,EAjBM,KAiBYC,EAjBZ,OAkBuCzF,mBAAS,8CAlBhD,oBAkBN0F,GAlBM,MAkBcC,GAlBd,SAmB2C3F,mBAAS,gBAnBpD,qBAmBN4F,GAnBM,MAmBgBC,GAnBhB,SAqBqB7F,oBAAS,GArB9B,qBAqBNhC,GArBM,MAqBK8H,GArBL,MAsKb,OA9IA7G,qBAAU,WACR6G,IAAa,GAEb3C,QAAQ4C,IAAI,CAACrD,EAAIsD,cAAetD,EAAIuD,oBACnCzC,MAAK,YAA4B,IAAD,mBAAzB0C,EAAyB,KAAfC,EAAe,KAE/BzB,EAAe,CACb1H,IAAKkJ,EAASlJ,IACdY,KAAMsI,EAAStI,KACfE,MAAOoI,EAASpI,MAChBH,OAAQuI,EAASvI,SAGnBgH,EAASwB,EAAUjI,KAAI,SAAAwF,GACrB,MAAO,CACLxG,MAAOwG,EAAK9F,KACZX,KAAMyG,EAAKzG,KACXE,MAAOuG,EAAKvG,MACZJ,MAAO2G,EAAK3G,MAAMC,IAClBoB,GAAIsF,EAAK1G,YAIdoJ,OAAM,SAAC9F,GACN+F,QAAQC,IAAR,sIAAuChG,EAAvC,SAEDiG,SAAQ,WACPT,IAAa,QAEd,IAkHD,kBAAC/J,EAAmByK,SAApB,CAA6B7G,MAAO/C,GAClC,yBAAKT,UAAU,QACb,kBAAC,EAAD,MACA,kBAAC,EAAD,CACE0B,cAAe,kBAAMoH,GAAwB,IAC7ClH,WAAY,kBAAMoH,GAAqB,IACvCzH,aAAc,kBAAM2H,GAAuB,IAC3ChH,YAAa,SAAC7B,GAAD,OAAUqI,EAAgBrI,IACvC8B,WAvFe,SAAC9B,GACtB,IAAMiK,EAAWjK,EAAKW,MAAMuJ,MAC1B,SAAAC,GAAU,OAAIA,EAAW3J,MAAQJ,EAAYI,OAEzC4J,EAAaH,EAAU,6CAAY,0DACxBA,EAAU,SAAArI,GAAE,OAAIsE,EAAImE,WAAWzI,IAAM,SAAAA,GAAE,OAAIsE,EAAIoE,SAAS1I,KAGhE5B,EAAK4B,IACXoF,MAAK,SAACR,GAEL,IAAM+D,EAAc,CAClB7J,MAAO8F,EAAIpF,KACXX,KAAM+F,EAAI/F,KACVE,MAAO6F,EAAI7F,MACXJ,MAAOiG,EAAIjG,MAAMC,IACjBoB,GAAI4E,EAAIhG,KAGJgK,EAAW/I,EAAMC,KAAI,SAAC+I,GAAD,OACzBA,EAAY7I,KAAO5B,EAAK4B,GAAK2I,EAAcE,KAG7CtC,EAASqC,MAEVZ,OAAM,SAACc,GACNb,QAAQC,IAAR,uEAA0BM,EAA1B,2EAAqDM,EAArD,UA8DE3I,aAzDwB,SAAC/B,GAC/BuI,EAAevI,IAyDTyB,MAAOA,EACPD,UAAWA,KAEb,kBAAC,EAAD,MAGE4G,GACA,kBAAC,EAAD,CACEpI,KAAMoI,EACN/F,QAAU,kBAAMgG,EAAgB,SAIpC,kBAAC,EAAD,CACEhF,WAAYyF,EACZ3G,OAAQqG,EACR9D,aAzIiB,SAAC,GAAkB,IAAjBtD,EAAgB,EAAhBA,KAAMsC,EAAU,EAAVA,KAC/BqF,EAAqB,mEACrB7C,EAAIyE,iBAAiB,CAACvJ,OAAMsC,SACzBsD,MAAK,SAACR,GACLqD,QAAQC,IAAR,wMACA5B,EAAe,2BAAI9H,GAAL,IAAkBgB,KAAMoF,EAAIpF,KAAME,MAAOkF,EAAIlF,SAC3DmH,GAAwB,MAEzBmB,OAAM,SAACc,GACNb,QAAQC,IAAR,4NAAuDY,EAAvD,SAEDX,SAAQ,WACPhB,EAAqB,8DA8HnB1G,QAAS,kBAAMoG,GAAwB,MAIzC,kBAAC,EAAD,CACEpF,WAAY2F,EACZ7G,OAAQyG,EACRnD,eAhImB,SAACmF,GAC1B3B,EAAoB,mEACpB/C,EAAI2E,eAAe,CAAC1J,OAAQyJ,IAC3B5D,MAAK,SAACR,GACL0B,EAAe,2BAAI9H,GAAL,IAAkBe,OAAQqF,EAAIrF,UAC5C0H,GAAuB,MAExBe,OAAM,SAACc,GACNb,QAAQC,IAAR,sNAAsDY,EAAtD,SAEDX,SAAQ,WACPd,EAAoB,8DAsHhB5G,QAAS,kBAAMwG,GAAuB,MAIxC,kBAAC,EAAD,CACExF,WAAY6F,GACZ/G,OAAQuG,EACRnH,WAjEe,SAACuJ,GACtB3B,GAAsB,mEACtBjD,EAAI6E,YAAY,CAAC3J,KAAM0J,EAASpK,MAAOD,KAAMqK,EAASrK,OACnDuG,MAAK,SAACR,GACL,IAAMwE,EAAU,CACdtK,MAAO8F,EAAIpF,KACXX,KAAM+F,EAAI/F,KACVE,MAAO6F,EAAI7F,MACXJ,MAAOiG,EAAIjG,MAAMC,IACjBoB,GAAI4E,EAAIhG,KAEV2H,EAAS,CAAC6C,GAAF,mBAAcvJ,KACtBkH,GAAqB,MAEtBiB,OAAM,SAACc,GACNb,QAAQC,IAAR,6QAAgEY,EAAhE,SAEDX,SAAQ,WACPZ,GAAsB,kDAgDpB9G,QAAS,kBAAMsG,GAAqB,MAGtC,kBAAC,EAAD,CACEtF,WAAY+F,GACZpJ,KAAMsI,EACNrC,UA7FiB,SAACjG,GACxBqJ,GAAwB,uDACxBnD,EAAI+E,WAAWjL,EAAK4B,IACjBoF,MAAK,SAACR,GAEL,IAAMgE,EAAW/I,EAAMyJ,QAAO,SAACT,GAAD,OAC5BA,EAAY7I,KAAO5B,EAAK4B,MAG1BuG,EAASqC,GACTX,QAAQC,IAAR,2DAAwB9J,EAAK4B,GAA7B,iDACA2G,EAAe,SAEhBqB,OAAM,SAACc,GACNb,QAAQC,IAAR,yMAAmDY,EAAnD,SAEDX,SAAQ,WACPV,GAAwB,oBA6EtBhH,QAAS,kBAAMkG,EAAe,Y,MCpOxC4C,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF3I,SAAS4I,eAAe,W","file":"static/js/main.48d23455.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header-logo.855a8c98.svg\";","module.exports = __webpack_public_path__ + \"static/media/profile-avatar.a60c8e94.jpg\";","module.exports = __webpack_public_path__ + \"static/media/photo-grid-peterhof-4.bf26b195.jpg\";","module.exports = __webpack_public_path__ + \"static/media/photo-grid-peterhof-3.21d5c7eb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/photo-grid-peterhof-1.e1f972ed.jpg\";","module.exports = __webpack_public_path__ + \"static/media/photo-grid-oranienbaum-1.02fa6c01.jpg\";","module.exports = __webpack_public_path__ + \"static/media/photo-grid-aleksandria.138fc0be.jpg\";","module.exports = __webpack_public_path__ + \"static/media/photo-grid-peterhof.7b0982f3.jpg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport headerLogo from '../images/header-logo.svg';\r\n\r\nconst Header = () => (\r\n  <header className=\"header\">\r\n    <img className=\"header__logo\" src={headerLogo} \r\n      alt='Логотип сервиса Mesto-Russia'/>\r\n  </header>\r\n);\r\n\r\nexport default Header;","import React, { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onClick, onLike, onDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwned = card.owner === currentUser._id;\r\n\r\n  const handleClick = () => {\r\n    onClick(card);\r\n  };\r\n\r\n  const handleLike = () => {\r\n    onLike(card);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    onDelete(card);\r\n  };\r\n\r\n  return(\r\n    <li className=\"card\">\r\n      <img \r\n        className=\"card__image\" \r\n        src={card.link} \r\n        alt={card.title} \r\n        onClick={handleClick} \r\n      />\r\n      <div className=\"card__description\">\r\n        <h2 className=\"card__title\">{card.title}</h2>\r\n        <div className=\"card__like-group\">\r\n          <button \r\n            className={\r\n              `card__btn card__btn_action_like shaded \r\n              ${card.likes.length > 0  ? 'card__btn_clicked' : ''}`\r\n            }\r\n            onClick={handleLike}\r\n            title=\"Нравится\" \r\n          />\r\n          <span className=\"card__like-num\">\r\n            {card.likes.length}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <button \r\n        className=\"card__btn card__btn_action_del shaded\" \r\n        disabled={!isOwned} hidden={!isOwned}\r\n        onClick={handleDelete}\r\n        title=\"Удалить\"\r\n      />\r\n    </li>\r\n  );\r\n\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"loader\"/>\r\n  );\r\n};\r\n\r\nexport default Loader;","import React, {useContext} from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\nimport Loader from './Loader';\r\n\r\nfunction Main(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return(\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n\r\n        <div className=\"profile__avatar\" onClick={props.onEditAvatar}>\r\n          <img \r\n            src={currentUser.avatar} \r\n            className=\"profile__image\" \r\n            alt=\"Аватар профиля\" \r\n            title=\"Изменить аватар профиля\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"profile__description\">\r\n          <h1 className=\"profile__name\">\r\n            {currentUser.name}\r\n          </h1>\r\n          <button \r\n            className=\"profile__btn profile__btn_action_edit shaded\"\r\n            title=\"Редактировать профиль\" \r\n            onClick={props.onEditProfile} \r\n          />\r\n          <p className=\"profile__work\">{currentUser.about}</p>\r\n        </div>\r\n\r\n        <button \r\n          className=\"profile__btn profile__btn_action_add shaded\" \r\n          onClick={props.onAddPlace} \r\n          title=\"Добавить фотографию\" \r\n        />\r\n      </section>\r\n\r\n      <section className=\"photo-grid\">\r\n      { props.isLoading \r\n        ? <Loader/>\r\n        : <ul className=\"photo-grid__list\">\r\n            {props.cards.map((card) => (\r\n              <Card key={card.id}\r\n                card={card} \r\n                onClick={props.onCardClick}\r\n                onLike={props.onCardLike}\r\n                onDelete={props.onCardDelete}\r\n              />\r\n            ))}        \r\n          </ul>\r\n      } \r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nconst Footer = () => (\r\n  <footer className=\"footer\">\r\n    <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n  </footer>\r\n);\r\n\r\nexport default Footer;","import React, { useEffect, useCallback } from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  const openClass = props.isOpen && 'popup_opened';\r\n\r\n  const handleCloseClick = props.onClose;\r\n\r\n  const handleEscPress = useCallback((evt) => {\r\n    if (evt.key === 'Escape') handleCloseClick();\r\n  }, [handleCloseClick]);\r\n\r\n  useEffect(() => {\r\n    if (props.isOpen) {\r\n      document.addEventListener('keyup', handleEscPress);\r\n    } else {\r\n      document.removeEventListener('keyup', handleEscPress);\r\n    };\r\n  }, [props.isOpen, handleEscPress]);\r\n\r\n  const handleOverlayClick = (evt) => {\r\n    if (evt.target === evt.currentTarget) handleCloseClick();\r\n  };\r\n\r\n  return(\r\n    <div \r\n      className={`popup popup_content_${props.name} ${openClass}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n    <div className=\"popup__container\">\r\n\r\n      <button \r\n        type=\"button\" \r\n        className=\"popup__btn popup__btn_action_close shaded\"\r\n        title=\"Закрыть форму без сохранения данных\"\r\n        onClick={handleCloseClick} \r\n      />\r\n\r\n      <form \r\n        name={props.name}\r\n        className={`popup__form popup__form_size_${props.size}`}\r\n        onSubmit={props.onSubmit} \r\n      >\r\n          <h3 className=\"popup__heading\">\r\n            {props.title}\r\n          </h3>\r\n\r\n          {props.children}\r\n\r\n          <button \r\n            type=\"submit\" value=\"Создать\" \r\n            disabled={props.submitDisabled}\r\n            className=\"popup__btn popup__btn_action_submit\"\r\n          >\r\n              {props.submitName}\r\n          </button>\r\n\r\n      </form>\r\n    </div>\r\n  </div>  \r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","\r\n// Используется при валидации форм\r\nexport const popupInputClass = {\r\n  inputError: 'popup__item_type_error',\r\n  error: 'popup__error_visible',\r\n};\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {popupInputClass} from '../utils/constants';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const [inputs, setInputs] = useState({\r\n    name: { value: currentUser.name, isValid: true, },\r\n    info: { value: currentUser.about, isValid: true, },\r\n  });\r\n\r\n  const [errorClasses, setErrorClasses] = useState({\r\n    name: { input: '', error: '', }, \r\n    info: {  input: '', error: '', },\r\n  });\r\n\r\n  const [errorMessages, setErrorMessages] = useState({name: '', info: ''});\r\n\r\n  useEffect(() => {\r\n    if (props.isOpen) {\r\n      setInputs({ \r\n        name: { value: currentUser.name, isValid: true, },\r\n        info: { value: currentUser.about, isValid: true, },\r\n      });      \r\n    } else {\r\n      setInputs({ \r\n        name: { value: '', isValid: false, },\r\n        info: { value: '', isValid: false, },\r\n      });\r\n    }\r\n    setErrorClasses({\r\n      name: { input: '', error: '', }, \r\n      info: { input: '', error: '', },\r\n    });\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value, validity} = e.target;\r\n    setInputs({...inputs, [name]: { value: value, isValid: validity.valid, }});\r\n  };\r\n\r\n  const handleInput = (e) => {\r\n    const {name, value, validity, validationMessage} = e.target;\r\n    setInputs({...inputs, [name]: { value: value, isValid: validity.valid, }});\r\n    setErrorMessages({...errorMessages, [name]: validationMessage});\r\n    setErrorClasses({...errorClasses,\r\n      [name]: { \r\n        input: !validity.valid ? popupInputClass.inputError : '', \r\n        error: !validity.valid ? popupInputClass.error : '', \r\n      }, \r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateUser({ name: inputs.name.value, info: inputs.info.value });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"profile\" size=\"l\" \r\n      title=\"Редактировать профиль\" \r\n      submitName={props.submitName} \r\n      submitDisabled={!inputs.name.isValid || !inputs.info.isValid}\r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\" \r\n          id=\"name\" name=\"name\" \r\n          className={`popup__item popup__item_type_name ${errorClasses.name.input}`} \r\n          maxLength=\"40\" minLength=\"2\" \r\n          placeholder=\"Имя\" required\r\n          value={inputs.name.value}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span \r\n          className={`popup__error ${errorClasses.name.error}`} \r\n          id=\"name-error\"\r\n        >\r\n          {errorMessages.name}\r\n        </span>\r\n      </label>\r\n\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\" \r\n          id=\"info\" name=\"info\" \r\n          className={`popup__item popup__item_type_info ${errorClasses.info.input}`} \r\n          maxLength=\"200\" minLength=\"2\" \r\n          placeholder=\"О себе\" required\r\n          value={inputs.info.value}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span \r\n          className={`popup__error ${errorClasses.info.error}`} \r\n          id=\"info-error\"\r\n        >\r\n          {errorMessages.info}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm> \r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React, {useContext, useEffect, useRef, useState} from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {popupInputClass} from '../utils/constants';\r\n\r\n// Редактирование пользователького аватара\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const inputRef = useRef();\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [errorClasses, setErrorClasses] = useState({input: '', error: '', });\r\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (props.isOpen) {\r\n      inputRef.current.value = currentUser.avatar;\r\n      setIsSubmitDisabled(false);\r\n    } else {\r\n      inputRef.current.value = '';\r\n      setIsSubmitDisabled(true);\r\n    };\r\n    setErrorMessage('');\r\n    setErrorClasses({input: '', error: '', });\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar(inputRef.current.value);\r\n  };\r\n\r\n  const handleInput = (e) => {\r\n    const {validity, validationMessage} = e.target;\r\n    setErrorMessage(validationMessage);\r\n    setErrorClasses({\r\n      input: !validity.valid ? popupInputClass.inputError : '', \r\n      error: !validity.valid ? popupInputClass.error : '', \r\n    });\r\n    setIsSubmitDisabled(!validity.valid);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"avatar\" size=\"m\" \r\n      title=\"Обновить аватар\" \r\n      submitName={props.submitName} \r\n      submitDisabled={isSubmitDisabled}      \r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"url\" ref={inputRef}\r\n          id=\"avatar\" name=\"avatar\" \r\n          pattern=\"https?://.+\" \r\n          className={`popup__item popup__item_type_name ${errorClasses.input}`}  \r\n          placeholder=\"Ссылка на картинку\" \r\n          required\r\n          onInput={handleInput}\r\n        />\r\n        <span\r\n          className={`popup__error ${errorClasses.error}`}  \r\n          id=\"avatar-error\"\r\n        >\r\n          {errorMessage}\r\n        </span>  \r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React, {useState, useEffect} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {popupInputClass} from '../utils/constants';\r\n\r\n// Добавление карточки\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [inputs, setInputs] = useState({ \r\n    title: { value: '', isValid: true, },\r\n    link: { value: '', isValid: true, },\r\n  });\r\n\r\n  const [errorClasses, setErrorClasses] = useState({\r\n    title: { input: '', error: '', }, \r\n    link: {  input: '', error: '', },\r\n  });\r\n\r\n  const [errorMessages, setErrorMessages] = useState({title: '', link: ''});\r\n\r\n  useEffect(() => {\r\n    setInputs({ \r\n      title: { value: '', isValid: false, },\r\n      link: { value: '', isValid: false, },\r\n    });\r\n    setErrorClasses({\r\n      title: { input: '', error: '', }, \r\n      link: { input: '', error: '', },\r\n    });\r\n  }, [props.isOpen]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onAddPlace({title: inputs.title.value, link: inputs.link.value});\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value, validity} = e.target;\r\n    setInputs({...inputs, [name]: { value: value, isValid: validity.valid, }});\r\n  };\r\n\r\n  const handleInput = (e) => {\r\n    const {name, value, validity, validationMessage} = e.target;\r\n    setInputs({...inputs, [name]: { value: value, isValid: validity.valid, }});\r\n    setErrorMessages({...errorMessages, [name]: validationMessage});\r\n    setErrorClasses({...errorClasses,\r\n      [name]: { \r\n        input: !validity.valid ? popupInputClass.inputError : '', \r\n        error: !validity.valid ? popupInputClass.error : '', \r\n      }, \r\n    });\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"card\" size=\"l\" \r\n      title=\"Новое место\" \r\n      submitName={props.submitName} \r\n      submitDisabled={!inputs.title.isValid || !inputs.link.isValid}\r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\"\r\n          id=\"title\" name=\"title\" \r\n          maxLength=\"30\" minLength=\"1\" \r\n          className={`popup__item popup__item_type_name ${errorClasses.title.input}`} \r\n          placeholder=\"Название\" \r\n          required\r\n          value={inputs.title.value}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span \r\n          className={`popup__error ${errorClasses.title.error}`} \r\n          id=\"title-error\"\r\n        >\r\n          {errorMessages.title}\r\n        </span>\r\n      </label>\r\n\r\n      <label className=\"popup__field\">\r\n        <input type=\"url\"\r\n          id=\"link\" name=\"link\" \r\n          pattern=\"https?://.+\" \r\n          className={`popup__item popup__item_type_info ${errorClasses.link.input}`} \r\n          placeholder=\"Ссылка на картинку\" \r\n          required\r\n          value={inputs.link.value}\r\n          onChange={handleChange}\r\n          onInput={handleInput}\r\n        />\r\n        <span \r\n          className={`popup__error ${errorClasses.link.error}`} \r\n          id=\"link-error\"\r\n        >\r\n          {errorMessages.link}\r\n        </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","import React, { useState, useEffect } from 'react';\r\n\r\n// Всплывающее окно просмотра фотографии\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  const [popupOpenClass, setPopupOpenClass] = useState('');\r\n\r\n  const handleCloseClick = () => {\r\n    setPopupOpenClass('');\r\n    onClose();\r\n  }\r\n\r\n  const handleOverlayClick = (evt) => {\r\n    if (evt.target === evt.currentTarget) handleCloseClick();\r\n  };\r\n\r\n  // Создание всплывающего окна\r\n  useEffect(() => {\r\n\r\n    const handleEscPress = (evt) => {\r\n      if (evt.key === 'Escape') handleCloseClick();\r\n    };\r\n\r\n    // Добавляем обработку нажатия ESC\r\n    document.addEventListener('keyup', handleEscPress);\r\n    // Делаем окно видимым\r\n    setPopupOpenClass('popup_opened');\r\n\r\n    // Удаление всплывающего окна\r\n    return (() => {\r\n      // Удаляем обработчик нажатия ESC\r\n      document.removeEventListener('keyup', handleEscPress);\r\n    });\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return(\r\n    <div \r\n      className={`popup popup_content_image ${popupOpenClass}`}\r\n      onClick={handleOverlayClick}\r\n    >\r\n      <div \r\n        className=\"popup__image-box\"\r\n      >\r\n        <button \r\n          type=\"button\" \r\n          className=\"popup__btn popup__btn_action_close shaded\"\r\n          title=\"Закрыть окно просмотра\"\r\n          onClick={handleCloseClick} \r\n        />\r\n\r\n        <figure \r\n          className=\"popup__figure\"\r\n        >\r\n          <img \r\n            className=\"popup__image\" \r\n            src={card.link} \r\n            alt={card.title}\r\n          />\r\n          <figcaption \r\n            className=\"popup__image-caption\"\r\n          >\r\n            {card.title}\r\n          </figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n// Всплывающее окно подтверждения действия\r\n\r\nfunction ConfirmPopup(props) {\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onConfirm(props.card);\r\n  };\r\n\r\n  return(\r\n    <PopupWithForm \r\n      name=\"confirm\" size=\"s\" \r\n      title=\"Вы уверены?\"\r\n      submitName={props.submitName}\r\n      submitDisabled={false}\r\n      isOpen={props.card} \r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;","//--------------------------------------------------------------------------------------\r\n// Модуль api.js\r\n// Класс Api\r\n//--------------------------------------------------------------------------------------\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res.status);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  postNewCard(item) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify(item)\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  patchNewAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify(link)\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  patchUserProfile(data) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({name: data.name, about: data.info})\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  unlikeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\r\n  headers: {\r\n    authorization: '963ba2cb-ffe5-4800-9828-03d0e9a57e68',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default api;\r\n","// Начальные значения карточек\r\n// Массив используется, если данные не загрузились с сервера\r\n\r\nimport peterhofImage4 from '../images/photo-grid-peterhof-4.jpg';\r\nimport peterhofImage3 from '../images/photo-grid-peterhof-3.jpg';\r\nimport peterhofImage1 from '../images/photo-grid-peterhof-1.jpg';\r\nimport oranienbaumImage from '../images/photo-grid-oranienbaum-1.jpg';\r\nimport alexandriaImage from '../images/photo-grid-aleksandria.jpg';\r\nimport peterhofImage from '../images/photo-grid-peterhof.jpg';\r\n\r\nexport const initialCards = [\r\n  { title: 'Петергоф', link: peterhofImage4, likes: [], owner: 0, id: 1 },\r\n  { title: 'Петергоф', link: peterhofImage3, likes: [], owner: 0, id: 2 },\r\n  { title: 'Петергоф', link: peterhofImage1, likes: [], owner: 0, id: 3 },\r\n  { title: 'Ораниенбаум', link: oranienbaumImage, likes: [], owner: 0, id: 4 },\r\n  { title: 'Парк Александрия', link: alexandriaImage, likes: [], owner: 0, id: 5 },\r\n  { title: 'Петергоф', link: peterhofImage, likes: [], owner: 0, id: 6 }\r\n];\r\n\r\n","import React, {useState, useEffect} from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\n\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport ConfirmPopup from './ConfirmPopup';\r\n\r\nimport api from '../utils/api';\r\nimport profileAvatar from '../images/profile-avatar.jpg';\r\nimport {initialCards} from '../utils/cards-init';\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState({\r\n    _id: 0, \r\n    name: 'Екатерина',\r\n    about: '(без доступа в сеть)',\r\n    avatar: profileAvatar,\r\n  });\r\n\r\n  const [cards, setCards] = useState(initialCards);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [deletedCard, setDeletedCard] = useState(null);\r\n\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n\r\n  const [profileSubmitName, setProfileSubmitName] = useState('Сохранить');\r\n  const [avatarSubmitName, setAvatarSubmitName] = useState('Сохранить');\r\n  const [addPlaceSubmitName, setAddPlaceSubmitName] = useState('Создать');\r\n  const [deleteCardSubmitName, setDeleteCardSubmitName] = useState('Да');\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Читаем данные с сервера\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n\r\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n    .then(([userData, cardsData]) => {\r\n\r\n      setCurrentUser({\r\n        _id: userData._id,\r\n        name: userData.name, \r\n        about: userData.about,\r\n        avatar: userData.avatar\r\n      });\r\n\r\n      setCards(cardsData.map(item => {\r\n        return {\r\n          title: item.name, \r\n          link: item.link, \r\n          likes: item.likes, \r\n          owner: item.owner._id,\r\n          id: item._id\r\n        };\r\n      }));\r\n    })\r\n    .catch((error) => {\r\n      console.log(`Ошибка загрузки данных: ${error}.`);\r\n    })\r\n    .finally(() => {\r\n      setIsLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  // Обновление информации о пользователе на сервере\r\n  const handleUpdateUser = ({name, info}) => {\r\n    setProfileSubmitName('Сохранение...');\r\n    api.patchUserProfile({name, info})\r\n      .then((res) => {\r\n        console.log(`Информация о пользователе сохранена.`);\r\n        setCurrentUser({...currentUser, name: res.name, about: res.about}); \r\n        setEditProfilePopupOpen(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно сохранить данные на сервере. ${err}.`);\r\n      })\r\n      .finally(() => { \r\n        setProfileSubmitName('Сохранить');\r\n      });  \r\n  };\r\n\r\n  // Обновление пользовательского аватара на сервере\r\n  const handleUpdateAvatar = (newAvatarLink) => {\r\n    setAvatarSubmitName('Сохранение...');\r\n    api.patchNewAvatar({avatar: newAvatarLink})\r\n    .then((res) => {\r\n      setCurrentUser({...currentUser, avatar: res.avatar});  \r\n      setEditAvatarPopupOpen(false);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Невозможно обновить аватар на сервере. ${err}.`);\r\n    })\r\n    .finally(() => {\r\n      setAvatarSubmitName('Сохранить');\r\n    });\r\n  };\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = (card.likes.some(\r\n      likeAuthor => likeAuthor._id === currentUser._id\r\n    ));\r\n    const likeAction = isLiked ? 'удалить' : 'поставить';\r\n    const likeFunc = isLiked ? id => api.unlikeCard(id) : id => api.likeCard(id);\r\n\r\n    // Ставим или удаляем лайк в зависимости от его текущего состояния\r\n    likeFunc(card.id)\r\n      .then((res) => {\r\n        // Если запрос выполнен успешно, создаем новую карточку\r\n        const changedCard = {\r\n          title: res.name, \r\n          link: res.link, \r\n          likes: res.likes, \r\n          owner: res.owner._id,\r\n          id: res._id\r\n        };\r\n        // Выполняем замену карточки\r\n        const newCards = cards.map((currentCard) => (\r\n          currentCard.id === card.id ? changedCard : currentCard\r\n        ));\r\n        // Обновляем состояние \r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно ${likeAction} лайк. Ошибка ${err}.`);\r\n      });\r\n  };\r\n\r\n  // Удаление карточки\r\n  const handleDeleteButtonClick = (card) => {\r\n    setDeletedCard(card);\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    setDeleteCardSubmitName('Удаление...');\r\n    api.deleteCard(card.id)\r\n      .then((res) => {\r\n        // Исключаем из массива удаленную карточку\r\n        const newCards = cards.filter((currentCard) => (\r\n          currentCard.id !== card.id\r\n        ));\r\n        // Обновляем состояние \r\n        setCards(newCards);\r\n        console.log(`Карточка ${card.id} удалена.`); \r\n        setDeletedCard(null);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно удалить карточку. Ошибка ${err}.`);\r\n      })\r\n      .finally(() => {\r\n        setDeleteCardSubmitName('Да');\r\n      });\r\n  };\r\n\r\n  const handleAddPlace = (newPlace) => {\r\n    setAddPlaceSubmitName('Сохранение...');\r\n    api.postNewCard({name: newPlace.title, link: newPlace.link})\r\n      .then((res) => {\r\n        const newCard = { \r\n          title: res.name, \r\n          link: res.link, \r\n          likes: res.likes, \r\n          owner: res.owner._id, \r\n          id: res._id\r\n        };\r\n        setCards([newCard, ...cards]);\r\n        setAddPlacePopupOpen(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Невозможно сохранить карточку на сервере. Ошибка ${err}.`);\r\n      })\r\n      .finally(() => {\r\n        setAddPlaceSubmitName('Создать');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header />\r\n        <Main \r\n          onEditProfile={() => setEditProfilePopupOpen(true)}\r\n          onAddPlace={() => setAddPlacePopupOpen(true)} \r\n          onEditAvatar={() => setEditAvatarPopupOpen(true)}\r\n          onCardClick={(card) => setSelectedCard(card)}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleDeleteButtonClick}\r\n          cards={cards}\r\n          isLoading={isLoading}\r\n        />\r\n        <Footer />\r\n\r\n        {/* Просмотр фотографии */}\r\n        { selectedCard && \r\n          <ImagePopup \r\n            card={selectedCard} \r\n            onClose={ () => setSelectedCard(null) }\r\n          /> \r\n        }\r\n        {/* Редактирование профиля пользователя */}\r\n        <EditProfilePopup \r\n          submitName={profileSubmitName}\r\n          isOpen={isEditProfilePopupOpen} \r\n          onUpdateUser={handleUpdateUser}\r\n          onClose={() => setEditProfilePopupOpen(false)} \r\n        />\r\n\r\n        {/* Обновление аватара пользователя */}\r\n        <EditAvatarPopup \r\n          submitName={avatarSubmitName}\r\n          isOpen={isEditAvatarPopupOpen} \r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          onClose={() => setEditAvatarPopupOpen(false)} \r\n        />\r\n\r\n        {/* Добавление карточки */}\r\n        <AddPlacePopup\r\n          submitName={addPlaceSubmitName}\r\n          isOpen={isAddPlacePopupOpen} \r\n          onAddPlace={handleAddPlace}\r\n          onClose={() => setAddPlacePopupOpen(false)} \r\n        />\r\n\r\n        <ConfirmPopup \r\n          submitName={deleteCardSubmitName}\r\n          card={deletedCard}\r\n          onConfirm={handleCardDelete}\r\n          onClose={() => setDeletedCard(null)}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}